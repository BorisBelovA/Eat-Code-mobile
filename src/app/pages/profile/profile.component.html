<ion-content>
  <ion-grid>
    <ion-row>
      <ion-col size="4">
        <ion-img src="../../../assets/images/avatar-placeholder/image.jpg"></ion-img>
      </ion-col>
      <ion-col size="8">
        <div class="h-100 d-flex flex-column jc-around profile-name">
          <span class="profile-name__name">{{ clientName$ | async }}</span>
          <ion-button expand="full">Редактировать</ion-button>
        </div>
      </ion-col>
    </ion-row>
  
    <ion-row class="ion-padding-top">
      <ion-col size="12">
        <div class="profile-section">
          <span class="profile-section__header">Ранее заказанное</span>
          <div class="profile-section__divider"></div>
          <div class="profile-section__content">
            <ion-slides [options]="ordersSlider">

              <ion-slide *ngFor="let order of orders" class="card__order-slide">
                <div class="card">
                  <div class="card__id">№ {{ order.id }}</div>
                  <div class="card__info">
                    <span>Дата заказа: {{ order.orderDate}}</span>
                    <span>Общая сумма: {{ order.totalPrice }}</span>
                  </div>
                  <div class="card__goods-list" style="width: 100%;">
                    <ion-slides [options]="sliderOptions">
                      <ion-slide *ngFor="let meal of order.meals">
                        <ion-item lines="none">
                          <ion-img src="../../../assets/images/meal-placeholder/image.webp"></ion-img>
                        </ion-item>
                      </ion-slide>
                    </ion-slides>
                  </div>
                </div>
              </ion-slide>
            </ion-slides>
          </div>
        </div>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="12">
        <div class="profile-section">
          <span class="profile-section__header">Ваши бронирования</span>
          <div class="profile-section__divider"></div>
          <div class="profile-section__content">
            <ng-container *ngIf="reservations.length === 0">
              <div>У вас нету активных бронирований</div>
            </ng-container>

            <ng-container *ngIf="reservations.length > 0">
              <ion-slides [options]="ordersSlider">

                <ion-slide *ngFor="let reservation of reservations" class="card__order-slide">
                  <div class="card">
                    <div class="card__id">Ресторан: {{ reservation.restaurant.name }}</div>
                    <div class="card__info">
                      <span>Адрес ресторана: {{ reservation.restaurant.address }}</span>
                      <span>Дата посещения: {{ reservation.date | dateTransform}}</span>
                    </div>
                    <div class="card__actions" >
                      <ion-button expand="full" color="danger" fill="outline" (click)="removeReservation(reservation.id)">Удалить</ion-button>
                    </div>
                  </div>
                </ion-slide>
              </ion-slides>
            </ng-container>
            <ion-button expand="block" (click)="reserve()">Зарезервировать столик</ion-button>
          </div>
        </div>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>

<ng-container *ngIf="loading">
  <app-loading-indicator></app-loading-indicator>
</ng-container>